<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„è¡Œç¨‹æœ¬ï½œSydney Diary V2.3</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --primary-color: #0B3A5B; 
      --secondary-color: #365C73;
      --accent-color: #1F77B4;
      --bg-color: #f5f5f7;
      --card-bg: #ffffff;
      --text-title: #111827;
      --text-subtitle: #4b5563;
      --text-body: #374151;
      --text-muted: #6b7280;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: var(--bg-color);
      color: var(--text-body);
    }

    a {
      color: var(--accent-color);
      text-decoration: none;
    }

    .app {
      max-width: 1100px;
      margin: 0 auto;
      padding: 16px;
    }

    /* ========= HEADER ========= */
    .top-bar {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-bottom: 12px;
    }

    #sidebar-toggle {
      border: none;
      background: var(--card-bg);
      border-radius: 999px;
      width: 32px;
      height: 32px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
      cursor: pointer;
    }

    #sidebar-toggle span {
      display: block;
      width: 14px;
      height: 2px;
      background: var(--primary-color);
      position: relative;
    }

    #sidebar-toggle span::before,
    #sidebar-toggle span::after {
      content: "";
      position: absolute;
      left: 0;
      width: 14px;
      height: 2px;
      background: var(--primary-color);
    }

    #sidebar-toggle span::before { top: -4px; }
    #sidebar-toggle span::after { top: 4px; }

    .top-bar-main {
      flex: 1;
    }

    .app-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-title);
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .time-weather-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 8px;
      align-items: center;
      overflow-x: auto;
    }

    .time-block,
    .weather-block {
      background: var(--card-bg);
      border-radius: 999px;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.04);
      font-size: 11px;
      color: var(--text-subtitle);
      flex-shrink: 0;
    }

    .time-label {
      font-weight: 600;
      color: var(--primary-color);
    }

    .time-main {
      font-variant-numeric: tabular-nums;
    }

    .icon-circle {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 1.5px solid var(--primary-color);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
    }

    .icon-clock::before {
      content: "âŒš";
      font-size: 9px;
      transform: translateY(-0.5px);
    }

    .icon-weather::before {
      content: "â˜";
      font-size: 9px;
      transform: translateY(-0.5px);
    }

    /* ========= OVERLAY & LAYOUT ========= */
    #sidebar-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.3);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease;
      z-index: 9;
    }

    #sidebar-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .layout {
      display: flex;
      gap: 16px;
      align-items: flex-start;
      position: relative;
    }

    /* ========= SIDEBAR ========= */
    .sidebar {
      width: 260px;
      background: var(--card-bg);
      border-radius: 12px;
      padding: 14px 12px 28px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      z-index: 10;
    }

    .sidebar-trip-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 4px;
    }

    .sidebar-trip-dates {
      font-size: 12px;
      color: var(--text-muted);
    }

    .sidebar-section-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--secondary-color);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sidebar-section-title span.icon-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent-color);
    }

    /* Day list */
    #day-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

/* å´é‚Šæ¬„ï¼šå¤©æ•¸åˆ—è¡¨ï¼ˆæ›´ç·Šæ¹Šã€3 æ¬„å›ºå®šå°é½Šã€ä¸è¶…å‡ºæ¬„å¯¬ï¼‰ */
.day-list-item{
  font-size: 11.5px;                  /* âœ… å­—é«”æ”¾å¤§ï¼ˆåŸæœ¬ 10â€“11ï¼‰ */
  padding: 6px 5px;                 /* ä¸Šä¸‹ä»ç¶­æŒèˆ’æœ */
  border-radius: 999px;
  cursor: pointer;

  display: grid;

  /* Day | æ—¥æœŸ | ä¸»é¡Œ */
  grid-template-columns: 38px 80px minmax(0,1fr);
  /*            â†‘     â†‘
     Dayâ†’æ—¥æœŸ â‰ˆ 1 å€‹å…¨å½¢å­—å…ƒ
     ä¸»é¡Œä¿ç•™æœ€å¤§ç©ºé–“ */

  align-items: center;

  column-gap: 2px;                  /* Day â†” æ—¥æœŸ å¹¾ä¹è²¼é½Š */
  line-height: 1.35;
  color: var(--text-body);
}

/* Day / æ—¥æœŸï¼šå›ºå®šä¸€è¡Œ */
.day-list-item .day-col1,
.day-list-item .day-col2{
  white-space: nowrap;
}

/* ä¸»é¡Œï¼šä¿ç•™é–±è®€è·é›¢ + ä¸çˆ†ç‰ˆ */
.day-list-item .day-col3{
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  padding-left: 10px;               /* âœ… æ—¥æœŸ â†” ä¸»é¡Œ ä¿ç•™åŸæœ¬è·é›¢ */
}

.day-list-item.active{
  background: var(--primary-color);
  color:#fff;
}

    
/* âœ… å…§å®¹å€å¯¬åº¦å›ºå®šï¼ˆæ¯ä¸€é ä¸‰å¼µç™½å¡éƒ½ä¸€è‡´ï¼‰ */
.content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 1;
  width: 100%;
  max-width: 760px;     /* âœ… å›ºå®šä¸Šé™ï¼Œé¿å…æŸäº›é çœ‹èµ·ä¾†è®Šçª„ */
}

    /* Cards (FX / Theme) */
    .card {
      background: var(--bg-color);
      border-radius: 12px;
      padding: 10px;
      font-size: 11px;
    }

    /* FX card */
    .fx-main-line {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 11px;
      color: var(--text-subtitle);
    }

    .fx-rate-label {
      font-weight: 500;
    }

    .icon-btn {
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      font-size: 11px;
      padding: 2px 6px;
      cursor: pointer;
      color: var(--accent-color);
    }

    .icon-btn:active {
      transform: translateY(1px);
    }

    .fx-row {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 4px;
    }

    .fx-row label {
      min-width: 44px;
    }

    .fx-row input[type="number"] {
      flex: 1;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      padding: 4px 6px;
      font-size: 11px;
    }

    .fx-tagline {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Theme card */
    .theme-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 6px;
      position: relative;
    }

    .theme-row label {
      min-width: 40px;
      font-size: 11px;
    }

    .theme-preview {
      flex: 1;
      height: 18px;
      border-radius: 999px;
      background: var(--primary-color);
      border: 1px solid #e5e7eb;
    }

    .theme-color-input {
      position: absolute;
      top: 0;
      left: 40px; /* è·Ÿ label å°é½Šå³å´ */
      right: 0;
      bottom: 0;
      opacity: 0;
      cursor: pointer;
    }

    .theme-row input[type="range"] {
      flex: 1;
    }

    .theme-row input[type="text"] {
      flex: 1;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      padding: 4px 6px;
      font-size: 11px;
      background: #f9fafb;
    }

    .small-button {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      cursor: pointer;
    }

    /* ========= CONTENT ========= */
    .content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 1;
    }

    #day-header,
#day-schedule,
#day-meals {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 14px 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  min-height: 110px;
  width: 100%;          /* âœ… ä¸€å¾‹ä½”æ»¿å…§å®¹å¯¬åº¦ */
  box-sizing: border-box;
}
    /* è®“ä¸‰å¼µç™½åº•å¡çœŸçš„è²¼é½Šå…§å®¹å€ï¼Œä¸è¦ç¸®é€²å» */
.content > section {
  width: 100%;
}

    .day-banner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .banner-label {
      font-weight: 600;
      margin-right: 4px;
      color: var(--secondary-color);
    }

    .banner-hotel-name {
      color: var(--primary-color);
      font-weight: 500;
    }

    .banner-hotel-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      color: var(--accent-color);
    }

    .icon-map {
      width: 14px;
      height: 14px;
      position: relative;
      display: inline-block;
    }

    .icon-map::before {
      content: "";
      position: absolute;
      width: 9px;
      height: 9px;
      border-radius: 50%;
      background: var(--accent-color);
      top: 0px;
      left: 2.5px;
    }

    .icon-map::after {
      content: "";
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #ffffff;
      top: 2.5px;
      left: 5px;
    }

    .day-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-title);
      margin-bottom: 4px;
    }

    .day-date {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 4px;
      font-variant-numeric: tabular-nums;
}

    .day-subtitle {
      font-size: 13px;
      color: var(--text-subtitle);
      margin-bottom: 6px;
    }

    .badge-row {
      margin-top: 4px;
    }

    .badge {
      display: inline-block;
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: #f3f4f6;
      color: var(--text-muted);
      margin-right: 4px;
    }

    .badge-highcal {
      background: #fef2f2;
      color: #b91c1c;
    }

    .section-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--secondary-color);
    }

    .schedule-row {
      display: grid;
      grid-template-columns: 80px 1fr;
      gap: 8px;
      padding: 8px 0;
      border-bottom: 1px dashed #e5e7eb;
    }

    .schedule-row:last-child {
      border-bottom: none;
    }

    .time-cell {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-subtitle);
    }

    .block-title {
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 2px;
      color: var(--text-title);
    }

    .block-detail {
      font-size: 12px;
      color: var(--text-body);
    }

    .block-meta {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .meals-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 8px;
    }

    .meal-card {
      padding: 10px;
      border-radius: 10px;
      background: #f9fafb;
    }

    .meal-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--secondary-color);
    }

    .meal-restaurant {
      font-size: 13px;
      margin-bottom: 2px;
      color: var(--text-title);
    }

    .meal-note {
      font-size: 12px;
      color: var(--text-body);
    }

    .meal-tag {
      display: inline-block;
      margin-top: 4px;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #6b7280;
    }

    .meal-tag-reserve {
      background: #eff6ff;
      color: #1d4ed8;
    }

    /* ========= RESPONSIVE ========= */
    @media (max-width: 768px) {
      .layout {
        flex-direction: column;
      }

      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        transform: translateX(-100%);
        transition: transform 0.2s ease;
        border-radius: 0 12px 12px 0;
      }

      .sidebar.open {
        transform: translateX(0);
      }
    }

    @media (min-width: 769px) {
      #sidebar-overlay {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- HEADER -->
    <header>
      <div class="top-bar">
        <button id="sidebar-toggle" aria-label="é–‹å•Ÿå´é‚Šé¸å–®">
          <span></span>
        </button>
        <div class="top-bar-main">
          <div class="app-title">å®¶ç¢©&é›¨æ¬ï½œSydney Diary</div>
          <div class="subtitle">V3.2ï½œå–®æª”ç‰ˆï½œå¯è‡ªè¡Œåˆ‡æ›æ—¥æœŸé é¢è¼‰å…¥è¡Œç¨‹</div>
          <div class="time-weather-row">
            <div class="time-block">
              <div class="icon-circle icon-clock"></div>
              <div>
                <div class="time-label">å°åŒ— TPE</div>
                <div class="time-main" id="time-tpe">--:--</div>
              </div>
            </div>
            <div class="time-block">
              <div class="icon-circle icon-clock"></div>
              <div>
                <div class="time-label">é›ªæ¢¨ SYD</div>
                <div class="time-main" id="time-syd">--:--</div>
              </div>
            </div>
            <div class="weather-block" id="weather-block">
              <div class="icon-circle icon-weather"></div>
              <div>
                <div class="time-label">é›ªæ¢¨å¤©æ°£</div>
                <div id="weather-main">è¼‰å…¥ä¸­â€¦</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- OVERLAY -->
    <div id="sidebar-overlay"></div>

    <!-- LAYOUT -->
    <div class="layout">
      <!-- SIDEBAR -->
      <aside class="sidebar" id="sidebar">
        <div>
          <div class="sidebar-trip-title" id="trip-title">é›ªæ¢¨è·¨å¹´ 10 æ—¥éŠ</div>
          <div class="sidebar-trip-dates" id="trip-dates">2025/12/23 â€“ 2026/01/02</div>
        </div>

        <div>
          <div class="sidebar-section-title">
            <span class="icon-dot"></span><span>ğŸ—“ å¤©æ•¸</span>
          </div>
          <ul id="day-list"></ul>
        </div>

        <div class="card">
          <div class="sidebar-section-title">
            <span class="icon-dot"></span><span>ğŸ’± åŒ¯ç‡æ›ç®—</span>
          </div>
          <div class="fx-main-line">
            <span class="fx-rate-label" id="fx-label">1 AUD â‰ˆ -- TWD</span>
            <button id="fx-refresh" class="icon-btn" type="button">âŸ³ æ›´æ–°</button>
          </div>
          <div class="fx-row">
            <label for="fx-aud">AUD</label>
            <input type="number" id="fx-aud" step="0.01">
          </div>
          <div class="fx-row">
            <label for="fx-twd">TWD</label>
            <input type="number" id="fx-twd" step="1">
          </div>
          <div class="fx-tagline" id="fx-tagline">
            åŒ¯ç‡ç”±ç¶²è·¯æ›´æ–°ï¼Œåƒ…ä¾›åƒè€ƒã€‚è¼¸å…¥ä»»ä¸€æ¬„ï¼Œå¦ä¸€é‚Šæœƒè‡ªå‹•å¹«ä½ ç®—ã€‚
          </div>
        </div>

        <div class="card">
          <div class="sidebar-section-title">
            <span class="icon-dot"></span><span>ğŸ¨ ä¸»é¡Œè‰²ç³»</span>
          </div>
          <div class="theme-row">
            <label for="theme-color">ä¸»è‰²</label>
            <div class="theme-preview" id="theme-preview"></div>
            <input type="color" id="theme-color" class="theme-color-input">
          </div>
          <div class="theme-row">
            <label>R</label>
            <input type="range" id="r-range" min="0" max="255">
          </div>
          <div class="theme-row">
            <label>G</label>
            <input type="range" id="g-range" min="0" max="255">
          </div>
          <div class="theme-row">
            <label>B</label>
            <input type="range" id="b-range" min="0" max="255">
          </div>
          <div class="theme-row">
            <label>è‰²ç¢¼</label>
            <input type="text" id="theme-hex" readonly>
          </div>
          <button id="reset-theme-btn" class="small-button">æ¢å¾©é è¨­</button>
        </div>
      </aside>

      <!-- CONTENT -->
      <main class="content">
        <section id="day-header"></section>
        <section id="day-schedule"></section>
        <section id="day-meals"></section>
      </main>
    </div>
  </div>

  <script>
    /* ========= é¡è‰²èˆ‡ä¸»é¡Œ ========= */
    function rgbToHex(r,g,b){
      function h(x){var s=x.toString(16);return s.length===1?"0"+s:s;}
      return "#"+h(r)+h(g)+h(b);
    }

    function hexToRgb(hex){
      hex = hex.replace("#","");
      var r = parseInt(hex.slice(0,2),16);
      var g = parseInt(hex.slice(2,4),16);
      var b = parseInt(hex.slice(4,6),16);
      return {r:r,g:g,b:b};
    }

    function mixWithWhite(r,g,b,ratio){
      return {
        r: Math.round(r + (255 - r)*ratio),
        g: Math.round(g + (255 - g)*ratio),
        b: Math.round(b + (255 - b)*ratio)
      };
    }

    function applyTheme(theme){
      var root = document.documentElement;
      root.style.setProperty("--primary-color", theme.primary);
      root.style.setProperty("--secondary-color", theme.secondary);
      root.style.setProperty("--accent-color", theme.accent);
      root.style.setProperty("--bg-color", theme.bg || "#f5f5f7");
      root.style.setProperty("--card-bg", "#ffffff");

      root.style.setProperty("--text-title", "#111827");
      root.style.setProperty("--text-subtitle", "#4b5563");
      root.style.setProperty("--text-body", "#374151");
      root.style.setProperty("--text-muted", "#6b7280");

      var colorInput = document.getElementById("theme-color");
      var rRange = document.getElementById("r-range");
      var gRange = document.getElementById("g-range");
      var bRange = document.getElementById("b-range");
      var hexInput = document.getElementById("theme-hex");

      if(colorInput) colorInput.value = theme.hex;
      if(rRange) rRange.value = theme.r;
      if(gRange) gRange.value = theme.g;
      if(bRange) bRange.value = theme.b;
      if(hexInput) hexInput.value = theme.hex.toUpperCase();
    }

function defaultTheme(){
  var r=11,g=58,b=91; // âœ… #0B3A5B æ·±æµ·æ´‹è—
  var secondaryRGB = mixWithWhite(r,g,b,0.25);
  var accentRGB = mixWithWhite(r,g,b,0.15);
  return {
    primary: "rgb("+r+","+g+","+b+")",
    secondary: "rgb("+secondaryRGB.r+","+secondaryRGB.g+","+secondaryRGB.b+")",
    accent: "rgb("+accentRGB.r+","+accentRGB.g+","+accentRGB.b+")",
    r:r,g:g,b:b,
    hex:"#0B3A5B",
    bg:"#f5f5f7"
  };
}

    function computeThemeFromRGB(r,g,b){
      var secondaryRGB = mixWithWhite(r,g,b,0.25);
      var accentRGB = mixWithWhite(r,g,b,0.15);
      return {
        primary: "rgb("+r+","+g+","+b+")",
        secondary: "rgb("+secondaryRGB.r+","+secondaryRGB.g+","+secondaryRGB.b+")",
        accent: "rgb("+accentRGB.r+","+accentRGB.g+","+accentRGB.b+")",
        r:r,g:g,b:b,
        hex: rgbToHex(r,g,b),
        bg:"#f5f5f7"
      };
    }

    function initThemeUI(){
      var t = defaultTheme();
      applyTheme(t);

      var tc = document.getElementById("theme-color");
      var r  = document.getElementById("r-range");
      var g  = document.getElementById("g-range");
      var b  = document.getElementById("b-range");
      var reset = document.getElementById("reset-theme-btn");

      if(tc){
        tc.addEventListener("input", function(e){
          var hex = e.target.value;
          var rgb = hexToRgb(hex);
          var theme = computeThemeFromRGB(rgb.r,rgb.g,rgb.b);
          applyTheme(theme);
        });
      }

      [r,g,b].forEach(function(range){
        if(!range) return;
        range.addEventListener("input",function(){
          var rr = parseInt(r.value||"17",10);
          var gg = parseInt(g.value||"24",10);
          var bb = parseInt(b.value||"39",10);
          var theme = computeThemeFromRGB(rr,gg,bb);
          applyTheme(theme);
        });
      });

      if(reset){
        reset.addEventListener("click",function(){
          var t = defaultTheme();
          applyTheme(t);
        });
      }
    }

    /* ========= æ™‚é–“åˆ— ========= */
    function updateTimes(){
      try {
        var now = new Date();
        var tpe = new Intl.DateTimeFormat('zh-TW', {
          hour:'2-digit', minute:'2-digit', hour12:false, timeZone:'Asia/Taipei'
        }).format(now);
        var syd = new Intl.DateTimeFormat('zh-TW', {
          hour:'2-digit', minute:'2-digit', hour12:false, timeZone:'Australia/Sydney'
        }).format(now);
        document.getElementById("time-tpe").textContent = tpe;
        document.getElementById("time-syd").textContent = syd;
      } catch(e) {
        document.getElementById("time-tpe").textContent = "--:--";
        document.getElementById("time-syd").textContent = "--:--";
      }
    }


function formatDateLabel(dateStr){
  var d = new Date(dateStr);
  if (isNaN(d)) return "";

  var y = d.getFullYear();
  var m = String(d.getMonth() + 1).padStart(2, "0");
  var day = String(d.getDate()).padStart(2, "0");
  var w = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()];

  return y + "/" + m + "/" + day + "ï¼ˆ" + w + "ï¼‰";
}
    
    /* ========= é›ªæ¢¨å³æ™‚å¤©æ°£ï¼ˆOpen-Meteoï¼‰ ========= */
    function fetchSydneyWeather(){
      var weatherMain = document.getElementById("weather-main");
      var url = "https://api.open-meteo.com/v1/forecast?latitude=-33.8688&longitude=151.2093&current_weather=true";
      fetch(url)
        .then(function(res){ return res.json(); })
        .then(function(data){
          if(!data || !data.current_weather){
            weatherMain.textContent = "æš«æ™‚ç„¡æ³•å–å¾—å¤©æ°£";
            return;
          }
          var cw = data.current_weather;
          var temp = cw.temperature;
          var wind = cw.windspeed;
          var code = cw.weathercode;
          var iconChar = "â˜";
          if(code === 0) iconChar = "â˜€";
          else if(code === 1 || code === 2) iconChar = "ğŸŒ¤";
          else if(code === 3) iconChar = "â˜";
          else if(code >= 51 && code <= 67) iconChar = "ğŸŒ¦";
          else if(code >= 71 && code <= 77) iconChar = "â„";
          else if(code >= 80 && code <= 82) iconChar = "ğŸŒ§";
          else if(code >= 95) iconChar = "â›ˆ";

          weatherMain.textContent =
            iconChar + " " + temp.toFixed(1) + "Â°Cï½œé¢¨ " + wind.toFixed(0) + " km/h";
        })
        .catch(function(){
          weatherMain.textContent = "è¼‰å…¥å¤±æ•—ï¼Œå¯é» Google æœå°‹å¤©æ°£";
        });
    }

    /* ========= åŒ¯ç‡æ›ç®—ï¼ˆè‡ªå‹•æ›´æ–°ï¼‹å¤±æ•— fallbackï¼‰ ========= */
    var fxRate = 20.00; // é è¨­å…ˆç•¶ 20

    function updateFxLabel(normal){
      var label = document.getElementById("fx-label");
      if(!label) return;
      if(normal){
        label.textContent = "1 AUD â‰ˆ " + fxRate.toFixed(2) + " TWD";
      }else{
        label.textContent = "1 AUD â‰ˆ " + fxRate.toFixed(2) + " TWDï¼ˆæ›´æ–°å¤±æ•—ï¼Œæš«ç”¨ 20 è¨ˆç®—ï¼‰";
      }
    }

function fetchFxRate(){
  var label = document.getElementById("fx-label");
  var tagline = document.getElementById("fx-tagline");
  if(label) label.textContent = "åŒ¯ç‡æ›´æ–°ä¸­â€¦";

  // âœ… å¤šä¾†æºå‚™æ´ï¼šå“ªå€‹ä½ ç¶²è·¯æ‰“å¾—é–‹å°±ç”¨å“ªå€‹
  var endpoints = [
    // 1) jsDelivr CDNï¼ˆé€šå¸¸æœ€å®¹æ˜“é€šï¼‰
    {
      name: "jsdelivr-currency",
      url: "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/aud/twd.json",
      parse: function(data){
        // { "date": "...", "twd": 20.1234 }
        return data && typeof data.twd === "number" ? data.twd : null;
      }
    },
    // 2) open.er-apiï¼ˆå…è²»å… keyï¼Œå¸¸è¦‹å¯ç”¨ï¼‰
    {
      name: "open-er-api",
      url: "https://open.er-api.com/v6/latest/AUD",
      parse: function(data){
        // { rates: { TWD: 20.12, ... }, result: "success" }
        return data && data.rates && typeof data.rates.TWD === "number" ? data.rates.TWD : null;
      }
    },
    // 3) frankfurterï¼ˆå¦‚æœä½ é‚£é‚Šæ‰“å¾—é–‹ä¹Ÿå¯ï¼‰
    {
      name: "frankfurter",
      url: "https://api.frankfurter.app/latest?from=AUD&to=TWD",
      parse: function(data){
        return data && data.rates && typeof data.rates.TWD === "number" ? data.rates.TWD : null;
      }
    }
  ];

  var i = 0;

  function tryNext(){
    if(i >= endpoints.length){
      // å…¨éƒ¨å¤±æ•—ï¼šç¶­æŒåŸæœ¬æˆ– fallback 20
      if(isNaN(fxRate) || fxRate <= 0) fxRate = 20.0;
      updateFxLabel(false);
      if(tagline) tagline.textContent = "åŒ¯ç‡æ›´æ–°å¤±æ•—ï¼Œæš«ä»¥ 20.00 è¨ˆç®—ã€‚ä»å¯è¼¸å…¥é‡‘é¡æ›ç®—ã€‚";
      return;
    }

    var ep = endpoints[i++];
    fetch(ep.url, { cache: "no-store" })
      .then(function(res){ return res.json(); })
      .then(function(data){
        var rate = ep.parse(data);
        if(typeof rate === "number" && rate > 0){
          fxRate = rate;
          localStorage.setItem("sydDiaryFxRate", fxRate.toString());
          updateFxLabel(true);
          if(tagline) tagline.textContent = "åŒ¯ç‡å·²æ›´æ–°ï¼ˆè‡ªå‹•å‚™æ´ä¾†æºï¼‰ï¼Œåƒ…ä¾›åƒè€ƒã€‚è¼¸å…¥ä»»ä¸€æ¬„ï¼Œå¦ä¸€é‚Šæœƒè‡ªå‹•å¹«ä½ ç®—ã€‚";
        }else{
          tryNext();
        }
      })
      .catch(function(){
        tryNext();
      });
  }

  tryNext();
}

    function initFx(){
      var audInput = document.getElementById("fx-aud");
      var twdInput = document.getElementById("fx-twd");
      var refreshBtn = document.getElementById("fx-refresh");
      var tagline = document.getElementById("fx-tagline");

      // å¾ localStorage è®€å–èˆŠåŒ¯ç‡
      var saved = localStorage.getItem("sydDiaryFxRate");
      if(saved){
        var r = parseFloat(saved);
        if(!isNaN(r) && r > 0){
          fxRate = r;
        }
      }
      updateFxLabel(true);
      if(tagline){
        tagline.textContent = "åŒ¯ç‡ç”±ç¶²è·¯æ›´æ–°ï¼Œåƒ…ä¾›åƒè€ƒã€‚è¼¸å…¥ä»»ä¸€æ¬„ï¼Œå¦ä¸€é‚Šæœƒè‡ªå‹•å¹«ä½ ç®—ã€‚";
      }

      function audChanged(){
        var aud = parseFloat(audInput.value || "0");
        if(fxRate > 0){
          twdInput.value = (aud * fxRate).toFixed(0);
        } else {
          twdInput.value = "";
        }
      }
      function twdChanged(){
        var twd = parseFloat(twdInput.value || "0");
        if(fxRate > 0){
          audInput.value = (twd / fxRate).toFixed(2);
        } else {
          audInput.value = "";
        }
      }

      audInput.addEventListener("input", audChanged);
      twdInput.addEventListener("input", twdChanged);

      refreshBtn.addEventListener("click", function(){
        fetchFxRate();
      });

      // ä¸€é€²é é¢å…ˆå˜—è©¦æ›´æ–°ä¸€æ¬¡
      fetchFxRate();
    }

    /* ========= è¡Œç¨‹è³‡æ–™ ========= */
var trip = {
  name: "é›ªæ¢¨è·¨å¹´ 10 æ—¥éŠ",
  dateRange: "2025/12/23 â€“ 2026/01/02",
  days: [
    {
      id:"d0",
      label:"å‡ºç™¼æ—¥ï½œ12/23ï¼ˆTueï¼‰",
      theme:"æ™šç­æ©Ÿå‡ºç™¼",
      date:"2025/12/23",
      title:"å‡ºç™¼æ—¥ï½œTPE â†’ SYD",
      subtitle:"æ™šç­æ©Ÿé£›å¾€é›ªæ¢¨ï¼Œæ©Ÿä¸Šä¼‘æ¯èª¿æ™‚å·®",
      stay:"æ©Ÿä¸Šéå¤œ",
      stayMap:"https://www.google.com/maps/place/Taiwan+Taoyuan+International+Airport",
      highCal:false,
      walk:3000,
      schedule:[
        {time:"20:30â€“22:30", title:"å‰å¾€æ¡ƒåœ’æ©Ÿå ´ãƒ»è¾¦ç†ç™»æ©Ÿ", detail:"å ±åˆ°ã€æ‰˜é‹è¡Œæã€é€šé—œï¼Œç™»æ©Ÿå‰è£œæ°´ã€‚", map:"https://www.google.com/maps/place/Taiwan+Taoyuan+International+Airport"},
        {time:"23:50", title:"23:50 TPE â†’ SYD", detail:"ä¸Šæ©Ÿå¾Œå„ªå…ˆç¡è¦ºï¼Œèª¿æ™‚å·®ã€‚", map:""}
      ],
      meals:{ breakfast:null, lunch:null, dinner:{name:"æ©Ÿå ´ï¼æ©Ÿä¸Šé¤", type:"è¼•é£Ÿï¼é£›æ©Ÿé¤", note:"ä¾ç­æ©Ÿä¾›é¤ç‚ºä¸»ã€‚", reserve:false} }
    },

    {
      id:"d1",
      label:"Day 1ï½œ12/24ï¼ˆWedï¼‰",
      theme:"æŠµé”ãƒ»è–èª•å‰å¤•",
      date:"2025/12/24",
      title:"Day 1ï½œæŠµé”é›ªæ¢¨ãƒ»è–èª•å‰å¤•",
      subtitle:"North Sydney æ”¾è¡Œæ â†’ æ¸¯ç£æ•£æ­¥ â†’ Anita Dining",
      stay:"Citadines Walker North Sydney",
      stayMap:"https://www.google.com/maps/search/Citadines+Walker+North+Sydney",
      highCal:true,
      walk:9000,
      schedule:[
        {time:"12:15â€“13:30", title:"æŠµé”é›ªæ¢¨æ©Ÿå ´ SYD", detail:"é€šé—œã€é ˜è¡Œæã€æª¢ç–«ã€‚", map:"https://www.google.com/maps/place/Sydney+Airport"},
        {time:"13:30â€“15:00", title:"å‰å¾€ North Sydneyï¼ˆå¯„æ”¾ï¼å…¥ä½ï¼‰", detail:"Airport Link â†’ Central è½‰ä¹˜ â†’ North Sydneyï¼Œæ­¥è¡Œåˆ°é£¯åº—ã€‚", map:"https://www.google.com/maps/search/North+Sydney+Station"},
        {time:"15:20â€“16:30", title:"Lavender Bay", detail:"æ¸¯ç£æ•£æ­¥æ‹ç…§ã€æ”¾é¬†ã€‚", map:"https://www.google.com/maps/place/Lavender+Bay"},
        {time:"16:45â€“17:45", title:"Luna Park æœˆç¥å…¬åœ’", detail:"æ‹ç…§èµ°èµ°ï¼Œä¸å¿…ç©è¨­æ–½ä¹Ÿå¾ˆæœ‰æ°£æ°›ã€‚", map:"https://www.google.com/maps/place/Luna+Park+Sydney"},
        {time:"19:00â€“21:00", title:"è–èª•å¤œæ™šé¤ï¼šAnita Diningï¼ˆå·²è¨‚ï¼‰", detail:"å»ºè­°ææ—© 10â€“15 åˆ†é˜åˆ°ã€‚", map:""}
      ],
      meals:{
        breakfast:null,
        lunch:{name:"ä¸‹æ©Ÿå¾Œç°¡å–®åˆé¤", type:"è¼•é£Ÿ", note:"åœ¨ Central / North Sydney å…ˆå¢Šèƒƒã€‚", reserve:false},
        dinner:{name:"Anita Dining", type:"è¥¿å¼æ–™ç†", note:"è–èª•å‰å¤•å·²è¨‚ã€‚", reserve:true}
      }
    },

    {
      id:"d2",
      label:"Day 2ï½œ12/25ï¼ˆThuï¼‰",
      theme:"è–èª•ç¯€æ…¢èµ°",
      date:"2025/12/25",
      title:"Day 2ï½œè–èª•ç¯€ãƒ»å¸‚å€æ…¢èµ°",
      subtitle:"Hyde Park â†’ æ•™å ‚ â†’ æ¤ç‰©åœ’ â†’ The Rocks å¤œè‰²",
      stay:"Citadines Walker North Sydney",
      stayMap:"https://www.google.com/maps/search/Citadines+Walker+North+Sydney",
      highCal:false,
      walk:11000,
      schedule:[
        {time:"09:30â€“11:30", title:"Hyde Parkãƒ»St Maryâ€™s Cathedral", detail:"è–èª•ç¯€å¾ˆå¤šåº—ä¼‘ï¼Œèµ°å¤è¹Ÿç·šæœ€é©åˆã€‚", map:"https://www.google.com/maps/place/St+Mary%27s+Cathedral+Sydney"},
        {time:"12:00â€“13:00", title:"å¸‚å€ç°¡å–®åˆé¤", detail:"è–èª•ç¯€ç‡Ÿæ¥­æ™‚é–“çŸ­ï¼Œçœ‹åˆ°é–‹çš„å°±å…ˆåƒã€‚", map:""},
        {time:"13:30â€“16:30", title:"Royal Botanic Gardensãƒ»Mrs Macquarieâ€™s Chair", detail:"æ¸¯ç£ç¶“å…¸æ‹ç…§é»ã€‚", map:"https://www.google.com/maps/place/Mrs+Macquarie%27s+Chair"},
        {time:"17:00â€“18:30", title:"The Rocks è–èª•å¸‚é›†ï¼å¸‚å€æ•£æ­¥", detail:"æœ‰é–‹å°±é€›ï¼Œæ²’æœ‰å°±ç•¶å¤œæ™¯æ•£æ­¥ã€‚", map:"https://www.google.com/maps/place/The+Rocks+Sydney"},
        {time:"19:30", title:"æ—©é»ä¼‘æ¯", detail:"éš”å¤©é–‹å§‹æ­£å¸¸ç¯€å¥ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"ä½å®¿é™„è¿‘å’–å•¡ï¼‹éºµåŒ…", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"å¸‚å€ç°¡å–®åˆé¤", type:"éš¨æ©Ÿæ‡‰è®Š", note:"è–èª•ç¯€ä»¥ã€Œæœ‰é–‹å°±åƒã€ç‚ºå„ªå…ˆã€‚", reserve:false},
        dinner:{name:"North Sydney é™„è¿‘ç°¡å–®æ™šé¤", type:"éš¨æ„", note:"ä¸è¦å¤ªæ™šï¼Œåº—å®¶å¯èƒ½ææ—©æ‰“çƒŠã€‚", reserve:false}
      }
    },

    {
      id:"d3",
      label:"Day 3ï½œ12/26ï¼ˆFriï¼‰",
      theme:"Surry Hillsãƒ»é›ªæ¢¨å¡”",
      date:"2025/12/26",
      title:"Day 3ï½œSurry Hillsï¼‹å¸‚å€ç¶“å…¸",
      subtitle:"è¨­è¨ˆå°åº—ï¼‹QVBï¼‹Sydney Tower Eyeï¼ˆå‚æ™šï¼‰",
      stay:"Citadines Walker North Sydney",
      stayMap:"https://www.google.com/maps/search/Citadines+Walker+North+Sydney",
      highCal:true,
      walk:12000,
      schedule:[
        {time:"09:30â€“11:30", title:"Surry Hills æ•£æ­¥", detail:"å’–å•¡åº—ã€è¨­è¨ˆå°åº—ã€è¡—å€æ°›åœã€‚", map:"https://www.google.com/maps/place/Surry+Hills"},
        {time:"12:00â€“13:00", title:"Surry Hills åˆé¤", detail:"æ‰¾è©•åˆ†é«˜çš„ Brunch åº—ã€‚", map:""},
        {time:"13:30â€“15:30", title:"QVBãƒ»Town Hall å‘¨é‚Š", detail:"ç¶“å…¸å»ºç¯‰ï¼‹å¸‚ä¸­å¿ƒé€›è¡—ã€‚", map:"https://www.google.com/maps/place/Queen+Victoria+Building"},
        {time:"16:30â€“18:00", title:"Sydney Tower Eyeï¼ˆå‚æ™šï¼‰", detail:"å‚æ™šè¦–é‡æœ€å¥½ã€‚", map:"https://www.google.com/maps/place/Sydney+Tower+Eye"},
        {time:"19:00", title:"æ™šé¤ï¼šå¸‚å€ï¼Chinatown", detail:"æ™šé¤è‡ªç”±é¸ï¼Œåƒå®Œå› North Sydneyã€‚", map:"https://www.google.com/maps/place/Chinatown+Sydney"}
      ],
      meals:{
        breakfast:{name:"å’–å•¡ï¼‹è¼•é£Ÿ", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"Surry Hills åˆé¤", type:"æ—©åˆé¤", note:"ç†±é–€åº—å¯ææ—©åˆ°ã€‚", reserve:false},
        dinner:{name:"Chinatownï¼å¸‚å€æ™šé¤", type:"ä¸­å¼ï¼äºæ´²æ–™ç†", note:"", reserve:false}
      }
    },

    {
      id:"d4",
      label:"Day 4ï½œ12/27ï¼ˆSatï¼‰",
      theme:"é­šå¸‚ãƒ»æ°´æ—é¤¨ãƒ»éŠèˆ¹",
      date:"2025/12/27",
      title:"Day 4ï½œé­šå¸‚å ´ï¼‹æ°´æ—é¤¨ï¼‹éŠèˆ¹æ™šé¤",
      subtitle:"æ¬åˆ° CBDï¼šå…ˆæµ·é®®ã€å†æ°´æ—é¤¨ã€æ™šä¸ŠéŠèˆ¹",
      stay:"Hotel Coronation Sydneyï¼ˆCBDï¼‰",
      stayMap:"https://www.google.com/maps/search/Hotel+Coronation+Sydney",
      highCal:true,
      walk:9000,
      schedule:[
        {time:"09:30â€“10:30", title:"é€€æˆ¿ â†’ æ¬åˆ° Coronationï¼ˆå¯„æ”¾/å…¥ä½ï¼‰", detail:"å…ˆåˆ° CBD æ”¾è¡Œæï¼Œè¼•è£å‡ºç™¼ã€‚", map:"https://www.google.com/maps/search/Hotel+Coronation+Sydney"},
        {time:"11:30â€“13:00", title:"Sydney Fish Market åˆé¤", detail:"æµ·é®®æ‹¼ç›¤ã€ç”Ÿè ”ã€ç‚¸é­šè–¯æ¢ã€‚", map:"https://www.google.com/maps/place/Sydney+Fish+Market"},
        {time:"13:30â€“16:30", title:"Darling Harbour æ•£æ­¥", detail:"æ¸¯é‚Šæ…¢èµ°ï¼‹æ‹ç…§ã€‚", map:"https://www.google.com/maps/place/Darling+Harbour"},
        {time:"16:30â€“17:40", title:"SEA LIFE Sydney Aquariumï¼ˆæ°´æ—é¤¨ï¼‰", detail:"æ™šé¤å‰å‰›å‰›å¥½ã€‚", map:"https://www.google.com/maps/place/SEA+LIFE+Sydney+Aquarium"},
        {time:"18:10â€“21:00", title:"é›ªæ¢¨æ¸¯æ™šé¤éŠèˆ¹ï¼ˆå·²è¨‚ï¼‰", detail:"ä¾ç¥¨åˆ¸æŒ‡ç¤ºç™»èˆ¹ï¼›å»ºè­°ææ—©åˆ°ç¢¼é ­ã€‚", map:"https://www.google.com/maps/search/King+Street+Wharf"},
        {time:"21:20", title:"å›é£¯åº—ä¼‘æ¯", detail:"æ•£å ´å¾Œå› CBD é£¯åº—ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"æ¬å®¶å‰ç°¡å–®æ—©é¤", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"Sydney Fish Market", type:"æµ·é®®", note:"å°–å³°å¯èƒ½æ’éšŠã€‚", reserve:false},
        dinner:{name:"æ¸¯ç£æ™šé¤éŠèˆ¹", type:"ä¸‰é“å¼æ™šé¤", note:"å·²è¨‚ã€‚", reserve:true}
      }
    },

    {
      id:"d5",
      label:"Day 5ï½œ12/28ï¼ˆSunï¼‰",
      theme:"è—å±±ä¸€æ—¥éŠ",
      date:"2025/12/28",
      title:"Day 5ï½œè—å±±åœ‹å®¶å…¬åœ’ï¼ˆè‡ªç”±è¡Œï¼‰",
      subtitle:"Katoombaãƒ»Scenic Worldãƒ»Three Sisters",
      stay:"Hotel Coronation Sydneyï¼ˆCBDï¼‰",
      stayMap:"https://www.google.com/maps/search/Hotel+Coronation+Sydney",
      highCal:false,
      walk:13000,
      schedule:[
        {time:"07:30â€“09:30", title:"Central â†’ Katoombaï¼ˆç«è»Šï¼‰", detail:"åˆ· Opal æˆ–è²·ç¥¨ï¼›æ—©å‡ºç™¼æ›´å¾å®¹ã€‚", map:"https://www.google.com/maps/place/Central+Station,+Sydney"},
        {time:"10:00â€“12:30", title:"Scenic World", detail:"Skyway / Railway / Cablewayï¼ˆçºœè»Šä¸‰å¯¶ï¼‰ã€‚", map:"https://www.google.com/maps/place/Scenic+World"},
        {time:"12:30â€“13:30", title:"åˆé¤ï¼šKatoomba å°é®", detail:"éš¨æ©ŸæŒ‘è©•åˆ†å¥½çš„åº—å³å¯ã€‚", map:"https://www.google.com/maps/place/Katoomba"},
        {time:"13:45â€“16:00", title:"Three Sistersãƒ»Echo Point", detail:"çœ‹ä¸‰å§å¦¹å²©ï¼‹é™„è¿‘æ­¥é“ã€‚", map:"https://www.google.com/maps/place/Echo+Point+Lookout"},
        {time:"16:30â€“18:30", title:"è¿”å›é›ªæ¢¨å¸‚å€", detail:"å›åˆ° CBD ä¼‘æ¯ã€ç°¡å–®æ™šé¤ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"å¤–å¸¶æ—©é¤/å’–å•¡", type:"è¼•é£Ÿ", note:"ç«è»Šä¸Šåƒã€‚", reserve:false},
        lunch:{name:"Katoomba åˆé¤", type:"è¥¿å¼ï¼å’–å•¡å»³", note:"", reserve:false},
        dinner:{name:"CBD ç°¡å–®æ™šé¤", type:"éš¨æ„", note:"èµ°ç´¯å°±æ—©é»å›é£¯åº—ã€‚", reserve:false}
      }
    },

    {
      id:"d6",
      label:"Day 6ï½œ12/29ï¼ˆMonï¼‰",
      theme:"çµäººè°·å“é…’",
      date:"2025/12/29",
      title:"Day 6ï½œçµäººè°·å“é…’ä¸€æ—¥åœ˜ï¼ˆå·²è¨‚ï¼‰",
      subtitle:"é…’èŠï¼‹èµ·å¸ï¼‹å·§å…‹åŠ›",
      stay:"Hotel Coronation Sydneyï¼ˆCBDï¼‰",
      stayMap:"https://www.google.com/maps/search/Hotel+Coronation+Sydney",
      highCal:true,
      walk:7000,
      schedule:[
        {time:"07:50â€“08:10", title:"å‰å¾€é›†åˆé»", detail:"St Laurence Churchï¼ˆ812 George Stï¼‰ã€‚", map:"https://www.google.com/maps/place/St+Laurence+Church"},
        {time:"08:20â€“17:30", title:"çµäººè°·ä¸€æ—¥åœ˜", detail:"é…’èŠå“é…’ã€èµ·å¸ç›¤ã€å·§å…‹åŠ›åº—ã€‚", map:"https://www.google.com/maps/search/Hunter+Valley"},
        {time:"18:00â€“19:30", title:"è¿”å›å¸‚å€ãƒ»æ™šé¤è‡ªç”±", detail:"ä¸å»ºè­°å¤ªæ™šï¼Œå›é£¯åº—ä¼‘æ¯ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"ç°¡å–®æ—©é¤", type:"è¼•é£Ÿ", note:"å¯å¤–å¸¶ã€‚", reserve:false},
        lunch:{name:"åœ˜å…§é¤é£Ÿ/å°é»", type:"ä¾è¡Œç¨‹", note:"", reserve:true},
        dinner:{name:"å¸‚å€è‡ªç”±æ™šé¤", type:"éš¨æ„", note:"", reserve:false}
      }
    },

    {
      id:"d7",
      label:"Day 7ï½œ12/30ï¼ˆTueï¼‰",
      theme:"å¡”é¾åŠ å‹•ç‰©åœ’",
      date:"2025/12/30",
      title:"Day 7ï½œTaronga Zoo å‹•ç‰©åœ’",
      subtitle:"ä¸Šåˆå‹•ç‰©åœ’ï¼Œä¸‹åˆå›å¸‚å€ï¼Œå…¥ä½ Rydges",
      stay:"Rydges Australia Square",
      stayMap:"https://www.google.com/maps/search/Rydges+Australia+Square",
      highCal:false,
      walk:11000,
      schedule:[
        {time:"08:30â€“09:10", title:"é€€æˆ¿ Coronation â†’ Rydges å¯„æ”¾è¡Œæ", detail:"å…ˆæŠŠè¡Œæç§»åˆ° Rydgesï¼ˆé€šå¸¸å¯å¯„æ”¾ï¼‰ã€‚", map:"https://www.google.com/maps/search/Rydges+Australia+Square"},
        {time:"09:30â€“13:00", title:"Taronga Zoo", detail:"Circular Quay æ­æ¸¡è¼ª â†’ å…¥åœ’ï¼›çœ‹ç„¡å°¾ç†Šã€æµ·ç…ç§€ã€‚", map:"https://www.google.com/maps/place/Taronga+Zoo+Sydney"},
        {time:"13:30â€“15:00", title:"å›å¸‚å€ä¼‘æ¯", detail:"æ¸¡è¼ªå› Circular Quayï¼Œæ‰¾å’–å•¡å»³åä¸€ä¸‹ã€‚", map:"https://www.google.com/maps/place/Circular+Quay"},
        {time:"15:30â€“16:30", title:"è¾¦ç†å…¥ä½ Rydges", detail:"Check-inã€æ•´ç†è·¨å¹´å…©å¤©ç”¨å“ã€‚", map:""},
        {time:"æ™šä¸Š", title:"è¼•é¬†æ™šé¤/æ•´ç†è¡Œæ", detail:"è·¨å¹´å‰ä¸€å¤©ï¼Œä¿æŒé«”åŠ›ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"å’–å•¡ï¼‹éºµåŒ…", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"å‹•ç‰©åœ’å…§ç°¡é¤", type:"åœ’å€é¤é»", note:"", reserve:false},
        dinner:{name:"CBD è¼•é¬†æ™šé¤", type:"éš¨æ„", note:"ä¸è¦å¤ªæ²¹å¤ªæ’ã€‚", reserve:false}
      }
    },

    {
      id:"d8",
      label:"Day 8ï½œ12/31ï¼ˆWedï¼‰",
      theme:"è·¨å¹´ãƒ»æ­ŒåŠ‡é™¢",
      date:"2025/12/31",
      title:"Day 8ï½œè·¨å¹´æ—¥ãƒ»æ­ŒåŠ‡é™¢ï¼‹è·¨å¹´å¤œ",
      subtitle:"ä¸Šåˆè¼•é¬†æ´»å‹•ï¼Œæ™šé–“æ­ŒåŠ‡ï¼‹After Partyï¼‹ç…™ç«",
      stay:"Rydges Australia Square",
      stayMap:"https://www.google.com/maps/search/Rydges+Australia+Square",
      highCal:true,
      walk:9000,
      schedule:[
        {time:"ä¸Šåˆ", title:"å¸‚å€è¼•é¬†æ´»å‹•", detail:"å¯é¸ï¼šNewtownï¼æ›¸åº—ï¼å’–å•¡å»³ï¼ˆé¿å…è€—é«”åŠ›ï¼‰ã€‚", map:"https://www.google.com/maps/place/Newtown"},
        {time:"ä¸‹åˆ", title:"å›é£¯åº—ä¼‘æ¯ãƒ»æ›è£", detail:"è·¨å¹´äººæ½®å¤§ï¼Œææ—©æ•´ç†å¥½ã€‚", map:""},
        {time:"å‚æ™š", title:"ææ—©åƒé»æ±è¥¿", detail:"é¿å…æ¼”å‡ºå¾Œå¤ªé¤“ã€ä¹Ÿé¿å…å¤ªæ™šæ‰¾ä¸åˆ°åƒçš„ã€‚", map:""},
        {time:"19:45â€“22:00", title:"é›ªæ¢¨æ­ŒåŠ‡é™¢è·¨å¹´æ­ŒåŠ‡ï¼ˆå·²è¨‚ï¼‰", detail:"ææ—©åˆ°å ´å®‰æª¢ã€‚", map:"https://www.google.com/maps/place/Sydney+Opera+House"},
        {time:"22:00â€“00:30", title:"After Partyï¼‹è·¨å¹´ç…™ç«", detail:"å€’æ•¸çœ‹æ¸¯ç£ç…™ç«ã€‚", map:""},
        {time:"00:30â€“01:10", title:"å›é£¯åº—", detail:"èµ°è·¯å› Rydgesï¼Œé¿é–‹æ“æ“ äº¤é€šã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"é£¯åº—é™„è¿‘æ—©é¤", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"å¸‚å€ç°¡å–®åˆé¤", type:"éš¨æ„", note:"", reserve:false},
        dinner:{name:"è¼•é£Ÿï¼‹After Party é»å¿ƒ", type:"è¼•é£Ÿ/æ´¾å°é¤é»", note:"ä¾ç¥¨åˆ¸å…§å®¹", reserve:true}
      }
    },

    {
      id:"d9",
      label:"Day 9ï½œ1/1ï¼ˆThuï¼‰",
      theme:"å›ç¨‹æ—¥",
      date:"2026/01/01",
      title:"Day 9ï½œå›ç¨‹",
      subtitle:"é€€æˆ¿å¾Œå¸‚å€ç°¡å–®èµ°èµ° â†’ å‰å¾€æ©Ÿå ´",
      stay:"Rydges Australia Squareï¼ˆé€€æˆ¿ï¼‰",
      stayMap:"https://www.google.com/maps/search/Rydges+Australia+Square",
      highCal:false,
      walk:6000,
      schedule:[
        {time:"ä¸Šåˆ", title:"é€€æˆ¿", detail:"å¯„æ”¾è¡Œææˆ–ç›´æ¥å¸¶èµ°ï¼ˆä¾ç•¶å¤©å®‰æ’ï¼‰ã€‚", map:""},
        {time:"ä¸Šåˆâ€“ä¸­åˆ", title:"å¸‚å€ç°¡å–®æ•£æ­¥ï¼æ—©é¤", detail:"è£œè²·ä¼´æ‰‹ç¦®ã€å–å’–å•¡ã€‚", map:""},
        {time:"ä¸‹åˆ", title:"å‰å¾€æ©Ÿå ´", detail:"Airport Link æˆ–æ©Ÿå ´å·´å£«ã€‚", map:"https://www.google.com/maps/place/Sydney+Airport"},
        {time:"20:00", title:"20:00 èµ·é£›è¿”å°ï¼ˆç¶“å¸ƒé‡Œæ–¯æœ¬è½‰æ©Ÿï¼‰", detail:"ä¾èˆªç­è³‡è¨Šè¾¦ç†ç™»æ©Ÿã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"City æ—©é¤/å’–å•¡", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"å¸‚å€ç°¡å–®åˆé¤", type:"éš¨æ„", note:"", reserve:false},
        dinner:{name:"æ©Ÿå ´/æ©Ÿä¸Šé¤", type:"æ©Ÿå ´é¤/é£›æ©Ÿé¤", note:"", reserve:false}
      }
    },

    {
      id:"d10",
      label:"å›å®¶æ—¥ï½œ1/2ï¼ˆFriï¼‰",
      theme:"æŠµé”å°ç£",
      date:"2026/01/02",
      title:"å›å®¶æ—¥ï½œæŠµé”å°ç£",
      subtitle:"æ¸…æ™¨æŠµå°ï¼Œå›å®¶ä¼‘æ¯",
      stay:"ç”œç”œçš„å®¶",
      stayMap:"https://www.google.com/maps/place/Taiwan+Taoyuan+International+Airport",
      highCal:false,
      walk:4000,
      schedule:[
        {time:"05:50â€“08:00", title:"æŠµé”æ¡ƒåœ’æ©Ÿå ´ãƒ»å…¥å¢ƒ", detail:"é ˜è¡Œæã€é€šé—œã€æ­è»Šå›å®¶ã€‚", map:"https://www.google.com/maps/place/Taiwan+Taoyuan+International+Airport"},
        {time:"08:00 ä¹‹å¾Œ", title:"å›å®¶æ•´ç†è¡Œæãƒ»å¥½å¥½ä¼‘æ¯", detail:"æ´—æ¾¡ã€æ´—è¡£æœã€æ•´ç†æˆ°åˆ©å“ã€‚", map:""}
      ],
      meals:{
        breakfast:{name:"æ©Ÿä¸Šç°¡å–®æ—©é¤æˆ–å›å®¶å†åƒ", type:"è¼•é£Ÿ", note:"", reserve:false},
        lunch:{name:"å®¶é™„è¿‘æˆ–å¤–é€", type:"éš¨æ„", note:"", reserve:false},
        dinner:{name:"å®¶å¸¸æ™šé¤", type:"åœ¨å®¶/å¤–å¸¶", note:"", reserve:false}
      }
    }
  ]
};

    /* ========= æ¸²æŸ“ ========= */
    var dayListEl   = document.getElementById("day-list");
    var dayHeaderEl = document.getElementById("day-header");
    var dayScheduleEl = document.getElementById("day-schedule");
    var dayMealsEl  = document.getElementById("day-meals");
    var currentDayIndex = 0;

    function initDayList(){
      dayListEl.innerHTML = "";
      for(var i=0;i<trip.days.length;i++){
        var d = trip.days[i];
        var li = document.createElement("li");
        li.className = "day-list-item" + (i===0 ? " active" : "");
        li.setAttribute("data-index", i);

        // ğŸ‘‰ æ–°ç‰ˆï¼šä¸å†åŠ æ‹¬å¼§ï¼Œè€Œæ˜¯ç”¨ã€Œï½œã€ä¸²èµ·ä¾†
        var textLeft = d.label;        // å‡ºç™¼æ—¥ï½œ12/23 æˆ– Day 1ï½œ12/24
var parts = textLeft.split("ï½œ");
var col1 = parts[0] || "";
var col2 = parts[1] || "";
var col3 = d.theme || "";

// ç”¨ä¸‰å€‹ span å¡åˆ°ä¸‰æ¬„
li.innerHTML =
  '<span>'+ col1 +'</span>' +
  '<span>'+ col2 +'</span>' +
  '<span>'+ col3 +'</span>';

        li.addEventListener("click", function(){
          var idx = parseInt(this.getAttribute("data-index"),10);
          currentDayIndex = idx;
          updateDayListActive();
          renderDay(idx);
        });
        dayListEl.appendChild(li);
      }
    }

    function updateDayListActive(){
      var items = dayListEl.querySelectorAll(".day-list-item");
      for(var i=0;i<items.length;i++){
        items[i].classList.toggle("active", i === currentDayIndex);
      }
    }

    function renderDay(index){
      var d = trip.days[index];

            // Header
      var bannerHTML = '';
      bannerHTML += '<div class="day-banner">';
      bannerHTML +=   '<div>';
      bannerHTML +=     '<span class="banner-label">ğŸ¨ ä»Šæ™šä½å®¿</span>';
      bannerHTML +=     '<span class="banner-hotel-name">'+ d.stay +'</span>';
      if(d.stayMap){
        bannerHTML +=   '<a class="banner-hotel-link" href="'+ d.stayMap +'" target="_blank" rel="noopener noreferrer">';
        bannerHTML +=     '<span class="icon-map"></span><span>åœ°åœ–</span>';
        bannerHTML +=   '</a>';
      }
      bannerHTML +=   '</div>';
      bannerHTML += '</div>';

      var badges = '';
      if(d.highCal){
        badges += '<span class="badge badge-highcal">ğŸ° é«˜ç†±é‡æ—¥</span>';
      }
      badges += '<span class="badge">ğŸš¶ ç›®æ¨™ '+ d.walk.toLocaleString() +' æ­¥</span>';

      dayHeaderEl.innerHTML =
        bannerHTML +
        '<div class="day-date">ğŸ“… ' + formatDateLabel(d.date) + '</div>' +
        '<div class="day-title">'+ d.title +'</div>' +
        '<div class="day-subtitle">'+ d.subtitle +'</div>' +
        '<div class="badge-row">'+ badges +'</div>';
      
      // Schedule
      dayScheduleEl.innerHTML = '<div class="section-title">ğŸ“‹ è¡Œç¨‹æ™‚é–“è»¸</div>';
      for(var i=0;i<d.schedule.length;i++){
        var b = d.schedule[i];
        var row = document.createElement("div");
        row.className = "schedule-row";
        var mapHtml = '';
        if(b.map){
          mapHtml = '<a href="'+b.map+'" target="_blank" rel="noopener noreferrer"><span class="icon-map"></span> åœ°åœ–</a>';
        }
        row.innerHTML =
          '<div class="time-cell">'+ b.time +'</div>'+
          '<div>'+
            '<div class="block-title">'+ b.title +'</div>'+
            '<div class="block-detail">'+ (b.detail||"") +'</div>'+
            '<div class="block-meta">'+ (mapHtml || '') +'</div>'+
          '</div>';
        dayScheduleEl.appendChild(row);
      }

      // Meals
      dayMealsEl.innerHTML = '<div class="section-title">ğŸ½ï¸ ä»Šæ—¥ä¸‰é¤</div>';
      var wrap = document.createElement("div");
      wrap.className = "meals-grid";
      var order = [["breakfast","æ—©é¤"],["lunch","åˆé¤"],["dinner","æ™šé¤"]];
      for(var j=0;j<order.length;j++){
        var key = order[j][0], label = order[j][1];
        var card = document.createElement("div");
        card.className = "meal-card";
        var meal = d.meals[key];
        if(meal){
          var tagClass = meal.reserve ? "meal-tag meal-tag-reserve" : "meal-tag";
          var tagText  = meal.reserve ? "ğŸ“… å»ºè­°é ç´„" : "ğŸ™‚ ä¸éœ€é ç´„";
          card.innerHTML =
            '<div class="meal-title">'+ label +'</div>'+
            '<div class="meal-restaurant">'+ meal.name +'</div>'+
            '<div class="meal-note">é¡å‹ï¼š'+ (meal.type||"â€”")+'<br>'+ (meal.note||"") +'</div>'+
            '<div class="'+tagClass+'">'+ tagText +'</div>';
        }else{
          card.innerHTML =
            '<div class="meal-title">'+ label +'</div>'+
            '<div class="meal-note" style="font-size:12px;color:var(--text-muted);">å°šæœªå®‰æ’ã€‚</div>';
        }
        wrap.appendChild(card);
      }
      dayMealsEl.appendChild(wrap);
    }

    /* ========= å´é‚Šæ¬„æ”¶åˆ ========= */
    function initSidebarToggle(){
      var toggle = document.getElementById("sidebar-toggle");
      var sidebar = document.getElementById("sidebar");
      var overlay = document.getElementById("sidebar-overlay");

      function openSidebar(){
        sidebar.classList.add("open");
        overlay.classList.add("active");
      }
      function closeSidebar(){
        sidebar.classList.remove("open");
        overlay.classList.remove("active");
      }

      toggle.addEventListener("click", function(){
        if(sidebar.classList.contains("open")){
          closeSidebar();
        }else{
          openSidebar();
        }
      });
      overlay.addEventListener("click", closeSidebar);
    }

    /* ========= INIT ========= */
    initThemeUI();
    initFx();
    initDayList();
    renderDay(0);
    updateTimes();
    setInterval(updateTimes, 1000);
    fetchSydneyWeather();
    setInterval(fetchSydneyWeather, 10*60*1000);
    initSidebarToggle();
  </script>
</body>
</html>
